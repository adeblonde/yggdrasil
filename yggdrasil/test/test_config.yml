---
  config_name : test_config

  ansible_resources :
    vault_password_file : 'AUTH_DIR/VAULT_PSSWD'
    
  infrastructure :
    providers :
    - provider :
        provider_name : aws
        region : 'eu-west-1'
        profile : developer
        credentials_file : 'AUTH_DIR/CRED_FILE'
        ssh_key : 'SSH_KEY'
        private_ssh_key_path : 'AUTH_DIR/SSH_KEY.pem'
        encrypted_creds_file : 'AUTH_DIR/ENCRYPT_CRED'
        
        machines :
        - machine :
            name : master_machine
            user : ubuntu
            number : 1
            groups :
              - master
              - front
            aws_specs :
              AMI : AMI_ID
              type : t2.small
              region : 'eu-west-1'
            config_script :
              - 'test_playbooks/config_master'

        - machine :
            name : worker_machine
            user : ubuntu
            number : 2
            groups :
              - worker
              - server
            aws_specs :
              AMI : AMI_ID
              type : t2.small
              region : 'eu-west-1'
            config_script :
              - 'test_playbooks/config_worker'

    - provider :
        provider_name : on-premises
        profile : developer
        private_ssh_key_path : 'AUTH_DIR/SSH_KEY.pem'
        machines :
        - machine :
            name : local_host
            user : USERNAME
            groups :
              - master

  data_sending :
    - data :
        origin : 'WORK_DIR/SCENARIO_NAME/test.txt'
        destination : '/home/ubuntu'
        isfolder : False
        by_names :
          - master_machine_0
          - worker_machine_0
        by_groups :
          - master
          - server

  data_receiving :
    - data :
        origin : 'WORK_DIR/SCENARIO_NAME/test.txt'
        destination : '/home/ubuntu'
        isfolder : False
        by_names :
          - master_machine_0
          - worker_machine_0
        by_groups :
          - master
          - server

  sync_jobs :
    extra_job_folders :
      - 'CODE_DIR/yggdrasil/test'
    job_list :
      - job :
        name : test_single_job
        target :
          - master_machine_0
        scripts :
          - playbook_test
      - job :
        name : test_group_job
        target :
          - worker
        scripts :
          - playbook_test
  pool_jobs :
    job_list :
      - job :
        name : test_pool_job
        type : pool
        target :
          - worker
        scripts :
          - playbook_test_1
          - playbook_test_2

  options :
    shutdown_after_complete : false
    data_only : false
    no_data : false