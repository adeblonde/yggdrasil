---
- config_name : test_config

  infrastructure :
  - provider : aws
  - credential_file : 'WORK_DIR/auth'
  - machines :
    - model_1 : 
        name : master_machine
        number : 1
        groups :
          - master
          - front
        aws_specs :
          - AMI : XXXX
          - type : t2.small
        config_scripts :
          - 'test_playbooks/config_master.yml'

    - model_2 : 
        name : worker_machine
        number : 2
        groups :
          - worker
          - server
        aws_specs :
          - AMI : XXXX
          - type : t2.small
        config_scripts :
          - 'test_playbooks/config_worker.yml'

  jobs :
  - job_single :
      name : job_single
      target : master_machine_1
      job_scripts :
        - 'test_playbooks/job_single.yml'
  - job_group :
      name : job_group
      target : worker
      job_scripts :
        - 'test_playbooks/job_group.yml'
  - job_pool :
      name : job_pool
      target : worker
      job_scripts :
        - 'test_playbooks/job_pool_1.yml'
        - 'test_playbooks/job_pool_2.yml'

  options :
  - shutdown_after_complete : false